drbd-reactor (0.8.0~rc.1-1) experimental; urgency=medium

  * CI: update for gitlab 15.0
  * prometheus: expose force-io-failures
  * doc: typo fix
  * promoter: implement secondary --force
  * bump min versions for secondary --force
  * core: mv version checks to main

 -- Roland Kammerer <roland.kammerer@linbit.com>  Fri, 10 Jun 2022 14:36:45 +0200

drbd-reactor (0.7.0-1) experimental; urgency=medium

  * New upstream release

 -- Roland Kammerer <roland.kammerer@linbit.com>  Thu, 19 May 2022 10:14:18 +0200

drbd-reactor (0.7.0~rc.1-1) experimental; urgency=medium

  * promoter: escape target name on stop
  * build: fix deb building
  * promoter: implement preferred nodes
  * promoter: rm path dep for promote service
  * events2: make parser more robust

 -- Roland Kammerer <roland.kammerer@linbit.com>  Thu, 12 May 2022 07:54:29 +0200

drbd-reactor (0.6.1-1) experimental; urgency=medium

  * build: allow signal-hook >= 0.1
  * events2: add force-io-failures

 -- Roland Kammerer <roland.kammerer@linbit.com>  Thu, 28 Apr 2022 17:52:14 +0200

drbd-reactor (0.6.0-1) experimental; urgency=medium

  * ctl: add evict command
  * ctl,evict: order files by demote failure action
  * ctl,evict: use systemd, allow maintenance
  * drbd-reactorctl.1: fix ls --disabled
  * drbd-reactorctl.1: fix disable
  * ctl: add bash completion

 -- Roland Kammerer <roland.kammerer@linbit.com>  Mon, 04 Apr 2022 10:51:12 +0200

drbd-reactor (0.5.3-1) experimental; urgency=medium

  [ Roland Kammerer ]
  * core: preserve pds/paths on conn updates
  * umh: fix env for peerdevice state

 -- Roland Kammerer <roland.kammerer@linbit.com>  Mon, 31 Jan 2022 08:22:12 +0100

drbd-reactor (0.5.2-1) experimental; urgency=medium

  [ Roland Kammerer ]
  * promoter: add auto-generated header
  * ctl: extend env
  * umh: add on-no-quorum-io-error.sh example
  * promoter: check for drbd options
  * build: allow 'make rpm' from release tarballs
  * promoter: systemd escape template names
  * ctl: linstor-gateway hint

  [ Christoph Böhmwalder ]
  * ctl: use subprocess.run instead of os.system

 -- Roland Kammerer <roland.kammerer@linbit.com>  Mon, 17 Jan 2022 10:49:37 +0100

drbd-reactor (0.5.1-1) experimental; urgency=medium

  * build: bump debian utils dep as well
  * promoter: fix stop-services-on-exit
  * promoter: override description

 -- Roland Kammerer <roland.kammerer@linbit.com>  Tue, 30 Nov 2021 10:17:29 +0100

drbd-reactor (0.5.0-1) experimental; urgency=medium

  * build,systemd: fix "is world-inaccessible."
  * core: dump config on debug level

 -- Roland Kammerer <roland.kammerer@linbit.com>  Fri, 19 Nov 2021 09:10:39 +0100

drbd-reactor (0.5.0~rc.1-1) experimental; urgency=medium

  [ Roland Kammerer ]
  * promoter: persist on-failure-action
  * containers: switch to ubi8
  * drbd-reactor.service: use env
  * promoter: deprecate on-stop-failure; introduce on-drbd-demote-failure
  * deps: bump utils to 9.19.1

  [ Christoph Böhmwalder ]
  * doc: add separate paragraph about automatic reloading

 -- Roland Kammerer <roland.kammerer@linbit.com>  Wed, 10 Nov 2021 14:36:03 +0100

drbd-reactor (0.4.4-1) experimental; urgency=medium

  [ Roland Kammerer ]
  * build: rename build Dockerfiles
  * promoter: handle sleep for "cold boot" if res exists

  [ Moritz "WanzenBug" Wanzenböck ]
  * ensure reload updates don't trigger promoter early

 -- Roland Kammerer <roland.kammerer@linbit.com>  Tue, 10 Aug 2021 08:25:07 +0200

drbd-reactor (0.4.3-1) experimental; urgency=medium

  [ Roland Kammerer ]
  * debian: add source/format
  * doc: add snippets dir to FILES
  * README.md: add info about autoload
  * ctl: add .flake8
  * promoter: use drbd-service-shim.sh

  [ Moritz "WanzenBug" Wanzenböck ]
  * pkgs: create /etc/drbd-reactor.d from deb/rpm
  * promoter: split ocf args using shell word splitting
  * promoter: fix drbd-promote template in multi-volume scenario

 -- Roland Kammerer <roland.kammerer@linbit.com>  Mon, 02 Aug 2021 14:05:22 +0200

drbd-reactor (0.4.2-1) experimental; urgency=medium

  [ Rene Peinthor ]
  * gitlab: add coverage report and use prebuilt image

  [ Roland Kammerer ]
  * promoter: fix ocf regex
  * ctl: use tempfile not in snippets
  * core,ctl: add autoload

 -- Roland Kammerer <roland.kammerer@linbit.com>  Tue, 27 Jul 2021 09:06:38 +0200

drbd-reactor (0.4.1-1) experimental; urgency=medium

  * treewide: update download urls
  * promoter: add sleep based on disk state
  * systemd: add !nocluster condition
  * systemd: add Documentation
  * drbd-utils: bump to 9.18.1

 -- Roland Kammerer <roland.kammerer@linbit.com>  Wed, 21 Jul 2021 10:20:57 +0200

drbd-reactor (0.4.0-1) experimental; urgency=medium

  * ctl,promoter: improve active on
  * promoter: compat with older systemd, make promotion a dependency
  * start after network is online
  * promoter: improve system shutdown

 -- Roland Kammerer <roland.kammerer@linbit.com>  Fri, 18 Jun 2021 08:01:22 +0200

drbd-reactor (0.4.0~rc.2-1) experimental; urgency=medium

  [ Roland Kammerer ]
  * treewide: cleanup log messages
  * promoter: filter diskless devices for drbd-promote
  * ctl: fix verbose output for ocf.ra
  * promoter: switch to unescaped output
  * ctl: restart daemon if no files given
  * ctl,promoter: print where likely active
  * ctl: fix disable --now
  * ctl,build: add man page
  * promoter: try to stop services before start
  * doc,promoter: add design document
  * doc,promoter: add review fixes from Lars
  * doc,promoter: rm arp_sender

 -- Roland Kammerer <roland.kammerer@linbit.com>  Fri, 11 Jun 2021 14:55:59 +0200

drbd-reactor (0.4.0~rc.1-1) experimental; urgency=medium

  [ Roland Kammerer ]
  * README.md: mark prometheus as done
  * drbd, Resource: add to_plugin_updates
  * core: allow plugins to be reloaded
  * systemd notify: unset NOTIFY_SOCKET
  * doc,man,prometheus: Sx -> Sy
  * core: don't fail if plugin fails to start
  * doc: rm dummy placeholder
  * promoter: make runner explicit
  * promoter: switch to systemd templates
  * promoter: add dependencies-as
  * promoter: add target-as
  * promoter: reload daemon only once
  * promoter: use [String] in templates
  * promoter: use contains
  * promoter: use anonymous block for file write
  * promoter: don't use map_err
  * doc,promoter: document dependencies-as, target-as
  * deps: bump drbd-utils to 9.18.0
  * doc: mv from src/ to doc/
  * doc,promoter: fix pragraph macro
  * doc,promoter: fix .Sy macro
  * allow daemon reloading via service
  * core: add newlines between snippets
  * promoter: wait a bit after stop
  * drbd-reactorctl: add tool
  * build: switch rpm to RHEL8 alike

  [ Christoph Böhmwalder ]
  * add example grafana dashboard
  * example: amend grafana dashboard

 -- Roland Kammerer <roland.kammerer@linbit.com>  Tue, 01 Jun 2021 09:09:35 +0200

drbd-reactor (0.3.0-1) experimental; urgency=medium

  [ Christoph Böhmwalder ]
  * prometheus: add "drbdreactor_up" metric

  [ Roland Kammerer ]
  * build: add drbd-utils dependency
  * promoter: wait till backing device shows up
  * containers: don't setup toolchain in lbbuild
  * containers: fix users and updates

 -- Roland Kammerer <roland.kammerer@linbit.com>  Mon, 26 Apr 2021 12:53:50 +0200

drbd-reactor (0.3.0~rc.1-1) experimental; urgency=medium

  * events2: fix device blocked type
  * events2: add "path" information
  * plugins: split into "change" and "event" plugins
  * prometheus: implement exporter
  * add drbdd.d snippets
  * promoter: add stop-services-on-exit
  * prometheus: cleanly shutdown TCP handler
  * drbdd -> drbd-reactor
  * core: add statistics polling
  * debian: rm dh-systemd

 -- Roland Kammerer <roland.kammerer@linbit.com>  Tue, 20 Apr 2021 13:42:46 +0200

drbd-reactor (0.2.0-1) experimental; urgency=medium

  * doc: MAYPROMOTE vs. MAY_PROMOTE

 -- Roland Kammerer <roland.kammerer@linbit.com>  Tue, 23 Mar 2021 14:09:52 +0100

drbdd (0.2.0-1) experimental; urgency=medium

  * doc: MAYPROMOTE vs. MAY_PROMOTE

 -- Roland Kammerer <roland.kammerer@linbit.com>  Tue, 23 Mar 2021 14:09:52 +0100

drbdd (0.2.0~rc.1-1) experimental; urgency=medium

  [ Roland Kammerer ]
  * COPYING: Apache-2.0
  * containers: initial build
  * introduce *PluginUpdate structs
  * Plugin/EventUpdate: rm "Update" from variants
  * PluginUpdate: mv event_type to structs
  * umh: implement user defined helpers
  * umh: check for backing_dev
  * umh: expose more env variables
  * umh: add example to config
  * build: add man pages
  * umh: add handler stdout/stderr
  * umh: add quotes around stderr
  * doc: add plugin man pages

  [ Moritz "WanzenBug" Wanzenböck ]
  * make PluginUpdate structs matchable
  * refactor umh handler invocation

 -- Roland Kammerer <roland.kammerer@linbit.com>  Tue, 16 Mar 2021 09:23:08 +0100

drbdd (0.1.0-1) experimental; urgency=medium

  [ Roland Kammerer ]
  * promoter: adjust resources
  * build,rpm: mark drbdd.toml as config
  * plugins: split init/run
  * README: contributions/dependencies
  * implement sd_notify
  * events2: downgrade parse problems to debug
  * README.md: add prometheus plugin
  * build: make debrelease build offline builds
  * promoter: adjust only once
  * rustify str_to_bool

  [ Robert Altnoeder ]
  * Remove superfluous statements
  * Fix text error

 -- Roland Kammerer <roland.kammerer@linbit.com>  Fri, 26 Feb 2021 08:36:28 +0100

drbdd (0.1.0~rc.2-1) experimental; urgency=medium

  [ Roland Kammerer ]
  * packaging,rpm: use real upstream name
  * Cargo.lock: bring back in sync
  * build: start using lbvers.py
  * packaging,rpm: add Release in %changelog
  * build,rpm: fix docker build
  * deps,fern: allow 0.5
  * build: add release target

  [ Moritz "WanzenBug" Wanzenböck ]
  * Ensure rustfmt formatting + test reports in CI
  * Remove unused "exitcode" crate
  * switch to fern for logging

 -- Roland Kammerer <roland.kammerer@linbit.com>  Sat, 20 Feb 2021 16:16:16 +0100

drbdd (0.1.0~rc.1-1) experimental; urgency=medium

  [ Roland Kammerer ]
  * initial commit
  * events: check minimum drbdsetup version
  * PluginUpdate: send current resource state
  * promoter,doc: mention default for on-stop-failure
  * Cargo.toml: add readme
  * Cargo.toml,authors: add Moritz
  * packaging: add systemd service file
  * promoter: add res config section
  * README.md: fix UpdatePluging description

  [ Rene Peinthor ]
  * Add .gitlab-ci.yml

  [ Moritz "WanzenBug" Wanzenböck ]
  * Use enums in place of strings when parsing log config
  * add .gitignore
  * move CLI arg parsing to main
  * refactor config file

 -- Roland Kammerer <roland.kammerer@linbit.com>  Wed, 17 Feb 2021 10:25:16 +0100
